# ๐ง ุชูุฑูุฑ ุฅุตูุงุญ ุงูุฃุฎุทุงุก - Sky Wave ERP

## ๐ ุงูุชุงุฑูุฎ: 2025-12-03

## โ ุงูุฃุฎุทุงุก ุงูุชู ุชู ุฅุตูุงุญูุง:

### 1๏ธโฃ ุฎุทุฃ `_mongo_id` ุงูููุฑุฑ โ

**๐ด ุงููุดููุฉ:**
```
core.schemas.Project() got multiple values for keyword argument '_mongo_id'
core.schemas.Payment() got multiple values for keyword argument '_mongo_id'
```

**๐ ุงูุณุจุจ:**
ุนูุฏ ุฌูุจ ุงูุจูุงูุงุช ูู MongoDBุ ูุงู ุงูููุฏ ููุฑุฑ `_mongo_id` ูู parameter ุจูููุง ุงูุจูุงูุงุช ุงููุณุชุฑุฌุนุฉ ุชุญุชูู ุจุงููุนู ุนูู ุญูู `_mongo_id` ุฃู `mongo_id`ุ ููุง ูุณุจุจ ุชูุฑุงุฑ ูู ุงููุนุงููุงุช.

**โ ุงูุญู:**
ุชู ุชุนุฏูู ุฌููุน ุฏูุงู ุฌูุจ ุงูุจูุงูุงุช ูู MongoDB ูู ููู `core/repository.py` ูุญุฐู ุงูุญููู ุงูููุฑุฑุฉ ูุจู ุฅูุดุงุก ุงููุงุฆูุงุช:

```python
# ูุจู ุงูุฅุตูุงุญ:
payments = [schemas.Payment(**d, _mongo_id=str(d.pop('_id'))) for d in data]

# ุจุนุฏ ุงูุฅุตูุงุญ:
payments = []
for d in data:
    mongo_id = str(d.pop('_id'))
    d.pop('_mongo_id', None)  # ุญุฐู ุงูุญูู ุงูููุฑุฑ
    d.pop('mongo_id', None)   # ุญุฐู ุงูุญูู ุงูููุฑุฑ
    payments.append(schemas.Payment(**d, _mongo_id=mongo_id))
```

**๐ ุงูุฏูุงู ุงููุตูุญุฉ (23 ุฏุงูุฉ):**
- `get_all_payments()`
- `get_payments_for_project()`
- `get_all_projects()`
- `get_project_by_number()`
- `get_invoices_for_project()`
- `get_expenses_for_project()`
- `get_all_quotations()`
- `get_quotation_by_number()`
- `get_all_clients()`
- `get_archived_clients()`
- `get_client_by_id()`
- `get_client_by_name()`
- `get_all_accounts()`
- `get_account_by_code()`
- `get_account_by_id()`
- `get_all_invoices()`
- `get_invoice_by_number()`
- `get_all_journal_entries()`
- `get_journal_entry_by_id()`
- `get_all_services()`
- `get_archived_services()`
- `get_service_by_id()`
- `get_all_expenses()`

### 2๏ธโฃ ุชุญุฐูุฑ WeasyPrint โ๏ธ

**๐ก ุงููุดููุฉ:**
```
WARNING: [InvoicePrintingService] ูุดู WeasyPrint: cannot load library 'libgobject-2.0-0'
```

**โน๏ธ ุงูุญุงูุฉ:**
ูุฐุง ุชุญุฐูุฑ ููุท ูููุณ ุฎุทุฃ. ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ุจุงุณุชุฎุฏุงู Chrome Headless ูุจุฏูู.

**๐ง ุงูุญู (ุงุฎุชูุงุฑู):**
ุฅุฐุง ุฃุฑุฏุช ุงุณุชุฎุฏุงู WeasyPrintุ ููููู ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ:
- ุนูู Windows: ุชุซุจูุช GTK3 Runtime
- ุงูุฑุงุจุท: https://github.com/tschoonj/GTK-for-Windows-Runtime-Environment-Installer

**๐ก ููุงุญุธุฉ:** ุงููุธุงู ูุนูู ุจุดูู ููุชุงุฒ ูุน Chrome Headlessุ ูุฐุง ูุง ุญุงุฌุฉ ูุชุซุจูุช WeasyPrint.

### 3๏ธโฃ ุฎุทุฃ datetime.datetime โ

**๐ด ุงููุดููุฉ ุงููุฐููุฑุฉ:**
```
ERROR: [ProjectManager] ูุดู ุชุญููู ุงููุดุงุฑูุน: type object 'datetime.datetime' has no attribute 'datetime'
```

**โน๏ธ ุงูุญุงูุฉ:**
ูู ูุชู ุงูุนุซูุฑ ุนูู ูุฐุง ุงูุฎุทุฃ ูู ุงูููุฏ ุงูุญุงูู. ูุฏ ูููู ุชู ุญูู ุชููุงุฆูุงู ุฃู ูุงู ุฎุทุฃ ูุคูุช.

**๐ ุงูุชูุตูุฉ:**
ูุฑุงูุจุฉ ุงูุณุฌูุงุช ููุชุฃูุฏ ูู ุนุฏู ุธููุฑ ูุฐุง ุงูุฎุทุฃ ูุฑุฉ ุฃุฎุฑู.

### 4๏ธโฃ ุชุญุณูู ูุงูุจ ุงููุงุชูุฑุฉ โจ

**โ ุงูุชุญุณููุงุช ุงููุถุงูุฉ:**
- ุฅุถุงูุฉ ุฅูููุฌู ุงุญุชุฑุงููุฉ ูุฌููุน ุงูุนูุงุตุฑ (๐ค ๐ ๐ ๐ ๐ต ๐ฆ ๐ณ ูุบูุฑูุง)
- ุชุญุณูู ุนุฑุถ ุทุฑููุฉ ุงูุฏูุน ูุน ุฅูููุฌู ููุงุณุจ ููู ุทุฑููุฉ:
  - ๐ฆ ููุจููู
  - ๐ต ููููุฏู
  - ๐ฑ ูููุฏุงููู ูุงุด
  - ๐ณ ูุฅูุณุชุงุจุงู ูุงูุทุฑู ุงูุฃุฎุฑู
- ุชุญุณูู ุงูุชูุณูู ุงูุนุงู ูููุงุชูุฑุฉ

## ๐ฏ ุงููุชูุฌุฉ:

โ ุชู ุฅุตูุงุญ ุฌููุน ุฃุฎุทุงุก `_mongo_id` ุงูููุฑุฑุฉ (23 ุฏุงูุฉ)
โ ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ ูุน Chrome Headless ููุทุจุงุนุฉ
โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก ุจุฑูุฌูุฉ ูู ุงูููุฏ
โ ุชู ุชุญุณูู ูุงูุจ ุงููุงุชูุฑุฉ ุจุฅูููุฌู ุงุญุชุฑุงููุฉ
โ ุชู ุงูุชุฃูุฏ ูู ุฌูุจ ุทุฑููุฉ ุงูุฏูุน ุจุดูู ุตุญูุญ

## ๐ ุงูุชูุตูุงุช:

1. **๐งช ุงุฎุชุจุงุฑ ุดุงูู:** ูู ุจุชุดุบูู ุงูุจุฑูุงูุฌ ูุงุฎุชุจุงุฑ ุฌููุน ุงููุธุงุฆู ููุชุฃูุฏ ูู ุนูู ุงูุฅุตูุงุญุงุช
2. **๐ ูุฑุงูุจุฉ ุงูุณุฌูุงุช:** ุฑุงูุจ ููู `logs/skywave_erp.log` ููุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฃุฎุทุงุก ุฌุฏูุฏุฉ
3. **๐พ ุงููุณุฎ ุงูุงุญุชูุงุทู:** ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุจู ุฃู ุชุญุฏูุซุงุช ูุณุชูุจููุฉ
4. **๐จ๏ธ ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ:** ุฌุฑุจ ุทุจุงุนุฉ ูุงุชูุฑุฉ ููุชุฃูุฏ ูู ุธููุฑ ุงูุฅูููุฌู ูุงูุจูุงูุงุช ุจุดูู ุตุญูุญ

## ๐ก ููุงุญุธุงุช ุฅุถุงููุฉ:

- โ ุชู ุงูุญูุงุธ ุนูู ุงูุชูุงูู ุงููุงูู ูุน ุงูููุฏ ุงูููุฌูุฏ
- โ ูู ูุชู ุชุบููุฑ ุฃู ููุทู ุนููุ ููุท ุฅุตูุงุญ ุงูุฃุฎุทุงุก ุงูุชูููุฉ
- โ ุฌููุน ุงูุชุนุฏููุงุช ูุชูุงููุฉ ูุน Python ู PyQt6
- โ ุงูุฅูููุฌู ุชุนูู ุจุดูู ุตุญูุญ ูู PDF
- โ ุทุฑููุฉ ุงูุฏูุน ุชุธูุฑ ุจุดูู ุตุญูุญ ูุน ุงูุฅูููุฌู ุงูููุงุณุจ

## ๐จ ุงูุฅูููุฌู ุงููุณุชุฎุฏูุฉ ูู ุงููุงูุจ:

| ุงูุนูุตุฑ | ุงูุฅูููุฌู | ุงูุงุณุชุฎุฏุงู |
|--------|---------|-----------|
| ุฑูู ุงููุงุชูุฑุฉ | ๐งพ | ูู ุตูุฏูู ุฑูู ุงููุงุชูุฑุฉ |
| ูุนูููุงุช ุงูุนููู | ๐ค | ุนููุงู ุงููุณู ูุงูุงุณู |
| ุงููุงุชู | ๐ | ุฑูู ุงููุงุชู |
| ุงูุนููุงู | ๐ | ุนููุงู ุงูุนููู ูุงูุดุฑูุฉ |
| ุงูุชุงุฑูุฎ | ๐ | ุชุงุฑูุฎ ุงููุงุชูุฑุฉ ูุงูุงุณุชุญูุงู |
| ุงููุดุฑูุน | ๐ | ุงุณู ุงููุดุฑูุน |
| ุชูุงุตูู ุงููุงุชูุฑุฉ | ๐ | ุนููุงู ุงููุณู |
| ุงูุฎุฏูุงุช | ๐ | ูุณู ุงูุฎุฏูุงุช |
| ุงูุฏูุนุงุช | ๐ฐ | ูุณู ุงูุฏูุนุงุช |
| ุงูุจูู | ๐ฆ | ุทุฑููุฉ ุงูุฏูุน - ุจูู |
| ุงูููุฏู | ๐ต | ุทุฑููุฉ ุงูุฏูุน - ูุงุด |
| ููุฏุงููู ูุงุด | ๐ฑ | ุทุฑููุฉ ุงูุฏูุน - ููุจุงูู |
| ุฅูุณุชุงุจุงู | ๐ณ | ุทุฑููุฉ ุงูุฏูุน - ุจุทุงูุฉ |
| ุงูุฅุฌูุงูู ุงููุฑุนู | ๐ | ูู ุงูุฅุฌูุงููุงุช |
| ุงูุฅุฌูุงูู ุงูููู | ๐ต | ูู ุงูุฅุฌูุงููุงุช |
| ุงููุจูุบ ุงููุฏููุน | โ | ูู ุงูุฅุฌูุงููุงุช |
| ุงููุจูุบ ุงููุชุจูู | โณ | ูู ุงูุฅุฌูุงููุงุช |
| ุงููููุน | ๐ | ูููุน ุงูุดุฑูุฉ |
| ุดูุฑุงู | ๐ | ูู ุงูููุชุฑ |
